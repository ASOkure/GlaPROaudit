<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="layout">
  <div layout:fragment="content">
    <div>
      <a th:href="@{/auditRecord/}" class="btn btn-default">
        <span>
          <img th:src="@{/images/icons/back.gif}"/> Back
        </span>
      </a>
    </div>
    <br/>
    <h1>Audit Record</h1>
    <table class="table table-striped">
      <tbody>
        <tr>
          <th>Audit Record Id</th>
          <td><span th:text="${auditRecord.auditRecordId}"/></td>
        </tr>
        <tr>
          <th>Audit ID</th>
          <td><span th:text="${auditRecord.audit.auditId}"/></td>
        </tr>
        <tr>
          <th>Audit Name</th>
          <td><span th:text="${auditRecord.audit.name}"/></td>
        </tr>
        <tr>
          <th>Centre</th>
          <td><span th:text="${auditRecord.centre} != null ? ${auditRecord.centre.centreName}"/></td>
        </tr>
        <tr>
          <th>Status</th>
          <td><span th:text="${auditRecord.status}"/></td>
        </tr>
        <tr>
          <th>Request Timestamp</th>
          <td><span th:text="${auditRecord.requestTimestamp} != null ? ${#calendars.format(auditRecord.requestTimestamp, 'yyyy-MM-dd HH:MM:SS ')} : ''"/></td>
        </tr>
        <tr>
          <th>Response Timestamp</th>
          <td><span th:text="${auditRecord.responseTimestamp} != null ? ${#calendars.format(auditRecord.responseTimestamp, 'yyyy-MM-dd HH:MM:SS ')} : ''"/></td>
        </tr>
      </tbody>
    </table>
  
    <br/>
    <h1>Patients</h1>
    <table class="table table-striped">
      <thead>
        <th>Id</th>
        <th>Postcode</th>
        <th>Diagnostic Category</th>
        <th>Sex</th>
        <th>Birth</th>
        <th>GH Start</th>
        <th>Dose (mg/day)</th>
        <th>Weight (kg)</th>
        <th>Age (in decimal)</th>
        <th>Injection Per Week</th>
        <th>Ongoing Prescription</th>
        <th>Note</th>
        <th>Record Date</th>
        <th>Actions</th>
      </thead>
      <tbody>
        <tr data-th-each="patient : ${auditRecord.patients}">
          <td data-th-text="${patient.patientId}"></td>
          <td data-th-text="${patient.postcode}"></td>
          <td data-th-text="${patient.diagnosticCategory}"></td>
          <td data-th-text="${patient.sex}"></td>
          <td data-th-text="${patient.birthYear} + '/' + ${patient.birthMonth}"></td>
          <td data-th-text="${patient.ghStartYear} + '/' + ${patient.ghStartMonth}"></td>
          <td data-th-text="${patient.dose}"></td>
          <td data-th-text="${patient.weight}"></td>
          <td data-th-text="${patient.age}"></td>
          <td data-th-text="${patient.injectionsPerWeek}"></td>
          <td data-th-text="${patient.ongoingPrescription}"></td>
          <td data-th-text="${patient.freeText}"></td>
          <td data-th-text="${patient.recordDate} != null ? ${#calendars.format(patient.recordDate, 'yyyy-MM-dd HH:MM:SS ')} : ''"></td>
          <td nowrap="nowrap">
            <a title="View" th:href="@{'/patient/{id}'(id=${patient.patientId})}"><img th:src="@{/images/icons/view.gif}"/></a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</html>